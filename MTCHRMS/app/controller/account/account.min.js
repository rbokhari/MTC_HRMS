hrmsModule.factory("authInterceptorService",["$q","$location","localStorageService","$window",function(n,t,i,r){var u={},f=function(n){n.headers=n.headers||{};var t=i.get("authorizationData");return t&&(n.headers.Authorization="Bearer "+t.token),n},e=function(t){return t.status===401&&(console.log("unauthorized call"),r.location.href="/login"),n.reject(t)};return u.request=f,u.responseError=e,u}]);hrmsModule.factory("authRepository",["$http","$q","localStorageService","employeeRepository",function(n,t,i,r){var o="http://localhost:90/",f={},u={isAuth:!1,employeeId:0,userName:"",fullName:"",departmentName:"",departmentId:0,empPicture:""},s=function(r){var s="grant_type=password&username="+r.userName+"&password="+r.password,f=t.defer();return n.post(o+"token",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(n){i.set("authorizationData",{token:n.access_token,userName:r.userName});u.isAuth=!0;u.userName=r.userName;f.resolve(n)}).error(function(n){e();f.reject(n)}),f.promise},e=function(){console.log("logOut from System");i.remove("authorizationData");u.isAuth=!1;u.userName=""},h=function(){var n=i.get("authorizationData");n&&(r.getEmployeeDetailByUserName(n.userName).$promise.then(function(n){u.isAuth=!0;u.userName=n.userName;u.fullName=n.employeeName;u.employeeId=n.id;u.departmentName=n.postedTo;u.empPicture=n.empPicture},function(){e();u.isAuth=!1}),u.isAuth=!0)};return f.login=s,f.logOut=e,f.fillAuthData=h,f.authentication=u,f}]);
/*
//# sourceMappingURL=account.min.js.map
*/