<style type="text/css">
    .datepicker {
        z-index: 515100 !important;
    }
</style>


<div class="container-fluid">
    <!-- BEGIN PAGE HEADER-->
    <div class="row-fluid">
        <div class="span12">
            <h3 class="page-title">
                Staff <small> Detail </small>
            </h3>
            <ul class="breadcrumb">
                <li>
                    <a href="/HRMSPortal"><i class="icon-home"></i></a><span class="divider">&nbsp;</span>
                </li>
                <li>
                    HRMS <span class="divider">&nbsp;</span>
                </li>
                <li><a href="/HRMSPortal/employee">Staff List</a><span class="divider">&nbsp;</span></li>
                <li>
                    <a href="#">Detail</a><span class="divider-last">&nbsp;</span>
                </li>
            </ul>
        </div>
    </div>
    <hr />
    <!-- END PAGE HEADER-->
    <!-- BEGIN PAGE CONTENT-->
    <div ng-hide="isBusy">
        <div class="progress progress-striped active">
            <div style="width: 100%;" class="bar"></div>
        </div>
    </div>
    <div class="row-fluid " ng-show="isBusy">
        <div class="span12">
            <form name="staffForm" novalidate>
                <div class="widget widget-tabs">
                    <div class="widget-title">
                        <h4><i class="icon-user"></i>Profile</h4>
                    </div>

                    <div class="widget-body">
                        <div class="tabbable">
                            <!--ng-init="tab=1"  set this in controller as tab=1  -->
                            <ul class="nav nav-tabs">
                                <li ng-class="{active:isTabSelected(6)}"><a href="" ng-click="setTab(6)">Kin Information</a></li>
                                <li ng-class="{active:isTabSelected(5)}"><a href="" ng-click="setTab(5)">Family Detail</a></li>
                                <li ng-class="{active:isTabSelected(4)}"><a href="" ng-click="setTab(4)">Previous Employment</a></li>
                                <li ng-class="{active:isTabSelected(3)}"><a href="" ng-click="setTab(3)">Qualification</a></li>
                                <li ng-class="{active:isTabSelected(2)}"><a href="" ng-click="setTab(2)">Passport & Visa</a></li>
                                <li ng-class="{active:isTabSelected(1)}"><a href="" ng-click="setTab(1)">Summary</a></li>
                            </ul>
                            <div class="tab-pane" id="tab1" ng-show="isTabSelected(1)">
                                <div class="span3">
                                    <div class="text-center profile-pic">
                                        <img data-img-loading-value="{{employee[0].empPicture}}" data-img-loading-size="profile" alt="" style="height: 220px; width: 220px;" width="220px" height="220px" />
                                        <!--<img src="/Content/img/profile-pic.jpg" ng-show="!employee[0].empPicture" style="height: 220px; width: 220px;" width="220px" height="220px" />
                                            <img ng-show="employee[0].empPicture" src="data:image/jpeg;base64,{{employee[0].empPicture}}" style="height: 220px; width: 220px;" width="220px" height="220px" alt="">-->
                                    </div>
                                    <ul class="nav nav-stacked">
                                        <li><a ng-href="/HRMSPortal/employee/edit/{{employee[0].id}}"><i class="icon-save"></i> Update</a></li>
                                        <li><a href="" ng-click="showPassport(employee[0].id)"><i class="icon-external-link"></i> Add Passport</a></li>
                                        <li><a href="" ng-click="showVisa(employee[0].id)"><i class="icon-external-link"></i> Add Visa</a></li>
                                        <li><a href="" ng-click="showPreviousEmployement(employee[0].id)"><i class="icon-external-link"></i> Add Experience</a></li>
                                        <li><a href="" ng-click="showChild(employee[0].id)"><i class="icon-external-link"></i> Add Children</a></li>
                                        <li><a href="" ng-click="showImageForm(employee[0].id)"><i class="icon-external-link"></i> Update Picture</a></li>
                                    </ul>

                                </div>
                                <div class="span6">
                                    <h4>{{ employee[0].employeeName }} - {{ employee[0].rank }} <br /><small>{{ employee[0].departmentId.departmentName}} </small></h4>
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td class="span2">Code :</td>
                                                <td>
                                                    {{ employee[0].employeeCode}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="span2">Regiment :</td>
                                                <td>
                                                    {{ employee[0].parentRegiment}}
                                                </td>
                                            </tr>

                                            <tr>
                                                <td class="span2">Nationality :</td>
                                                <td>
                                                    {{ employee[0].validationDetailId.nameEn}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="span2"> Appointment :</td>
                                                <td>
                                                    {{ employee[0].appointment | date:'longDate' }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="span2">Birthday :</td>
                                                <td>
                                                    {{ employee[0].dateOfBirth | date:'longDate' }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="span2"> Birth Place :</td>
                                                <td>
                                                    {{ employee[0].placeOfBirth }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="span2"> Religion :</td>
                                                <td>
                                                    {{ employee[0].religion }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="span2">Blood Group :</td>
                                                <td>
                                                    {{ employee[0].bloodGroup }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="span2">User Name :</td>
                                                <td>
                                                    {{ employee[0].userName }}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <h4>Contact Information</h4>
                                    <div class="well">
                                        <address>
                                            <strong>Mobile </strong><br>
                                            {{ employee[0].mobile }}
                                        </address>
                                        <address>
                                            <strong>Phone </strong><br>
                                            {{ employee[0].phone }}
                                        </address>
                                        <address>
                                            <strong>Email </strong><br>
                                            {{ employee[0].email }}
                                        </address>
                                        <address>
                                            <strong>Address </strong><br>
                                            {{ employee[0].address }}
                                        </address>
                                        <address>
                                            <strong>Permanent Address </strong><br>
                                            {{ employee[0].permanentAddress }}
                                        </address>
                                    </div>
                                    <hr />
                                    <a ng-href="/hrmsportal/employee/edit/{{employee[0].id}}" class="btn btn-info">
                                        <i class="icon-save"></i>
                                        Update
                                    </a>
                                </div>
                                <div class="span3">
                                    <h4>Previous Employment</h4>
                                    <ul class="icons push" ng-repeat="pemp in employee[0].previousEmployments">
                                        <li><i class="icon-hand-right"></i> <strong>{{pemp.companyName}}</strong><br /><em>Start Date : {{pemp.startDate | date:'longDate'}}</em><br /><em>End Date : {{ pemp.endDate | date:'longDate' }}</em><br></li>
                                    </ul>
                                    <!--<h4>Current Status</h4>
                                        <div class="alert alert-success"><i class="icon-ok-sign"></i> Working in ABC Company</div>
                                        <h4>Some Projects</h4>
                                        <ul class="unstyled">
                                            <li> <strong>Project 1</strong>: <a href="javascript:void(0)">exampleproject1.com</a></li>
                                            <li> <strong>Project 2</strong>: <a href="javascript:void(0)">exampleproject2.com</a></li>
                                            <li> <strong>Project 3</strong>: <a href="javascript:void(0)">exampleproject3.com</a></li>
                                            <li> <strong>Project 4</strong>: <a href="javascript:void(0)">exampleproject4.com</a></li>
                                            <li> <strong>Project 5</strong>: <a href="javascript:void(0)">exampleproject5.com</a></li>
                                        </ul>-->
                                </div>

                            </div>

                            <div class="tab-pane" id="tab2" ng-show="isTabSelected(2)">
                                <i class="icon-hand-right"></i>  <strong>Passport Information</strong>
                                <span class="pull-right"><a href="" ng-click="showPassport(employee[0].id)"><i class="icon-external-link"></i> Add Passport</a></span>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <table class="table table-striped table-bordered table-advance table-hover" id="sample_1">
                                            <thead>
                                                <tr>
                                                    <th>Passport No</th>
                                                    <th>Issue Date</th>
                                                    <th>Expiry Date</th>
                                                    <th>Status</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="odd" ng-repeat="passport in employee[0].employeePassports">
                                                    <td><a href="" ng-click="editPassport(passport)">{{ passport.passportNo}}</a>  </td>
                                                    <td>{{ passport.issueDate | date:'longDate'}}</td>
                                                    <td>{{ passport.expiryDate | date:'longDate'}}</td>
                                                    <td>
                                                        <label ng-class="{'label label-info': passport.statusId, 'label label-inverse': passport.statusId==0}">
                                                            <ng-pluralize count="passport.statusId" when="{'0':'expire', '1':'active'}"></ng-pluralize>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        <a href="" ng-click="deletePassport(passport)"> <i class="icon-trash red"></i></a>
                                                    </td>

                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <br /><br />
                                <i class="icon-hand-right"></i>  <strong>Visa Information</strong>
                                <span class="pull-right"><a href="" ng-click="showVisa(employee[0].id)"><i class="icon-external-link"></i> Add Visa</a></span>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <table class="table table-striped table-bordered table-advance table-hover" id="sample_1">
                                            <thead>
                                                <tr>
                                                    <th>Visa No</th>
                                                    <th>Issue Date</th>
                                                    <th>Expiry Date</th>
                                                    <th>Status</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="odd " ng-repeat="visa in employee[0].employeeVisas">
                                                    <td><a href="" ng-click="editVisa(visa)">{{ visa.visaNumber}}</a></td>
                                                    <td>{{ visa.issueDate | date:'longDate'}}</td>
                                                    <td>{{ visa.expiryDate | date:'longDate' }}</td>
                                                    <td>
                                                        <label ng-class="{'label label-info': visa.statusId, 'label label-inverse': visa.statusId==0}">
                                                            <ng-pluralize count="visa.statusId" when="{'0':'expire', '1':'active'}"></ng-pluralize>
                                                        </label>

                                                    </td>
                                                    <td>
                                                        <a href="" ng-click="deleteVisa(visa)"> <i class="icon-trash red"></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                            </div>

                            <!-- Qualification -->
                            <div class="tab-pane" id="tab3" ng-show="isTabSelected(3)">
                                <form id="frmQualification" name="frmQualification" novalidate>
                                    <div class="row-fluid">
                                        <div class="span12">
                                            <div class="form-horizontal">
                                                <div class="control-group">
                                                    <label class="control-label">Educational (School Level) :</label>
                                                    <div class="controls">
                                                        <textarea id="tSchoolLevel" name="tSchoolLevel" class="span12"></textarea>
                                                        <div class="help-inline" ng-show="staffForm.tCode.$error.required && staffForm.tCode.$dirty">*</div>
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Educational Degrees :</label>
                                                    <div class="controls">
                                                        <textarea id="tDegree" name="tDegree" class="span12"></textarea>
                                                        <div class="help-inline" ng-show="staffForm.cNationality.$error.required && staffForm.cNationality.$dirty">*</div>
                                                    </div>
                                                </div>
                                                <div class="form-actions">
                                                    <a id="cmdSave" class="btn btn-primary" ng-click="save(employeeDef)" ng-disabled="staffForm.$isvalid">
                                                        <i class="icon-save"></i>
                                                        Update
                                                    </a>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>
                            
                            <!-- Previous Employment -->
                            <div class="tab-pane" id="tab4" ng-show="isTabSelected(4)">
                                <i class="icon-hand-right"></i>  <strong>Previous Experience</strong>
                                <span class="pull-right"><a href="" ng-click="showPreviousEmployement(employee[0].id)"><i class="icon-external-link"></i> Add Experience</a></span>
                                <table class="table table-striped table-bordered table-advance">
                                    <thead>
                                        <tr>
                                            <th>Sr.</th>
                                            <th>Company Name</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="pemployment in employee[0].previousEmployments">
                                            <td>{{$index + 1}}</td>
                                            <td>{{pemployment.companyName}}</td>
                                            <td>{{pemployment.startDate | date:'longDate'}}</td>
                                            <td>{{pemployment.endDate | date:'longDate' }}</td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>

                            <!-- Family Detail -->
                            <div class="tab-pane" id="tab5" ng-show="isTabSelected(5)">
                                <i class="icon-hand-right"></i>  <strong>Marital Status</strong>
                                <hr />
                                <form id="frmFamily" name="frmFamily" novalidate>
                                    <div class="row-fluid">
                                        <div class="span6">
                                            <div class="form-horizontal">
                                                <div class="control-group">
                                                    <label class="control-label">Status :</label>
                                                    <div class="controls">
                                                        <select id="cFamilyStatus" name="cFamilyStatus" ng-model="employee[0].employeeMarital[0].maritalStatusId" ng-options="marital.id as marital.nameEn for marital in maritals"></select>
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Birth Date :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tFamilyBirthDate" name="tFamilyBirthDate" ng-model="employee[0].employeeMarital[0].birthDate" datepicker />
                                                        <div class="help-inline" ng-show="frmFamily.tFamilyBirthDate.$error.required && frmFamily.tFamilyBirthDate.$dirty">*</div>
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Marriage Date :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tMarriageDate" name="tMarriageDate" ng-model="employee[0].employeeMarital[0].marriageDate" datepicker />
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Nationlity :</label>
                                                    <div class="controls">
                                                        <select id="cFamilyNationality" name="cFamilyNationality" ng-model="employee[0].employeeMarital[0].nationalityId" ng-options="nationality.id as nationality.nameEn for nationality in nationalities"></select>
                                                        <div class="help-inline" ng-show="frmFamily.cFamilyNationality.$error.required && frmFamily.cFamilyNationality.$dirty">*</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="form-horizontal">
                                                <div class="control-group">
                                                    <label class="control-label">Spouse Name :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tSpouseName" name="tSpouseName" ng-model="employee[0].employeeMarital[0].spouseName" />
                                                        <div class="help-inline" ng-show="frmFamily.tSpouseName.$error.required && frmFamily.tSpouseName.$dirty">*</div>
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Birth Place :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tFamilyBirthPlace" name="tFamilyBirthPlace" ng-model="employee[0].employeeMarital[0].birthPlace" />
                                                        <div class="help-inline" ng-show="frmFamily.tFamilyBirthPlace.$error.required && frmFamily.tFamilyBirthPlace.$dirty">*</div>
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Marriage Place :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tMarriagePlace" name="tMarriagePlace" ng-model="employee[0].employeeMarital[0].marriagePlace" />
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <a id="cmdSave" class="btn btn-primary" ng-click="saveEmployeeMarital(employee[0].id, employee[0].employeeMarital[0])" ng-disabled="staffForm.$isvalid">
                                            <i class="icon-save"></i>
                                            Update
                                        </a>
                                    </div>

                                    <i class="icon-hand-right"></i>  <strong>Children</strong>
                                    <span class="pull-right"><a href="" ng-click="showChild(employee[0].id)"><i class="icon-external-link"></i> Add Children</a></span>
                                    <hr />
                                    <table class="table table-striped table-bordered table-advance">
                                        <thead>
                                            <tr>
                                                <th>Sr.</th>
                                                <th>Name</th>
                                                <th>Age</th>
                                                <th>Gender</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="child in employee[0].childrens">
                                                <td>{{ $index + 1}}</td>
                                                <td>{{child.childrenName}}</td>
                                                <td>{{child.birthDate | date:'longDate'}}</td>
                                                <td>{{child.genderId}}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </form>
                            </div>
                            <div class="tab-pane" id="tab6" ng-show="isTabSelected(6)">
                                <form id="frmKin" name="frmKin" novalidate>
                                    <i class="icon-hand-right"></i>  <strong>Next of Kin Detail</strong>
                                    <hr />
                                    <div class="row-fluid">
                                        <div class="span6">
                                            <div class="form-horizontal">
                                                <div class="control-group">
                                                    <label class="control-label">Full Name :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tKinFullName" name="tKinFullName" ng-model="employee[0].employeeKin[0].fullName1" />
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Country :</label>
                                                    <div class="controls">
                                                        <select id="cCountry1" name="cCountry1" ng-model="employee[0].employeeKin[0].countryId1" ng-options="country.id as country.nameEn for country in countries"></select>
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Address :</label>
                                                    <div class="controls">
                                                        <textarea id="tKinAddress" name="tKinAddress" ng-model="employee[0].employeeKin[0].address1"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="form-horizontal">
                                                <div class="control-group">
                                                    <label class="control-label">Relationship :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tKinRelationship" name="tKinRelationshiop" ng-model="employee[0].employeeKin[0].relationship1" />
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Airport :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tKinRelationship" name="tKinRelationshiop" ng-model="employee[0].employeeKin[0].airport1" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <i class="icon-hand-right"></i>  <strong>Additional Next of Kin Detail (if any)</strong>
                                    <hr />
                                    <div class="row-fluid">
                                        <div class="span6">
                                            <div class="form-horizontal">
                                                <div class="control-group">
                                                    <label class="control-label">Full Name :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tKinFullName" name="tKinFullName" ng-model="employee[0].employeeKin[0].fullName2" />
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Country :</label>
                                                    <div class="controls">
                                                        <select id="cCountry2" name="cCountry2" ng-model="employee[0].employeeKin[0].countryId2" ng-options="country.id as country.nameEn for country in countries"></select>
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Address :</label>
                                                    <div class="controls">
                                                        <textarea id="tKinAddress" name="tKinAddress" ng-model="employee[0].employeeKin[0].address2"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="form-horizontal">
                                                <div class="control-group">
                                                    <label class="control-label">Relationship :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tKinRelationship" name="tKinRelationshiop" ng-model="employee[0].employeeKin[0].relationship2" />
                                                    </div>
                                                </div>
                                                <div class="control-group">
                                                    <label class="control-label">Airport :</label>
                                                    <div class="controls">
                                                        <input type="text" id="tKinRelationship" name="tKinRelationshiop" ng-model="employee[0].employeeKin[0].airport2" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <i class="icon-hand-right"></i>  <strong>NOTE</strong>
                                    <em>(Incase of accident who should be contacted as alternative to or additional to Next of Kin)</em>
                                    <hr />
                                    <textarea id="tNote" name="tNode" class="input-xxlarge span12" rows="4" ng-model="employee[0].employeeKin[0].notes"></textarea>

                                    <div class="form-actions">
                                        <a id="cmdSave" class="btn btn-primary" ng-click="saveEmployeeKin(employee[0].id, employee[0].employeeKin[0])" ng-disabled="frmKin.$isvalid">
                                            <i class="icon-save"></i>
                                            Update
                                        </a>
                                    </div>
                                    <div class="error" ng-show="errors.length > 0" ng-repeat="error in errors">{{ error }}</div>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>

            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        $('.sidebar-menu > .active').removeClass('active open');
        $('#liHRMS, #liStaffRegistration').addClass('active open');
        //$('#tIssueDate, #tDOE').datepicker({
        //    format: 'dd/mm/yyyy',
        //    autoclose:'true'
        //});

        $('#tIssueDate').datepicker({
            format: 'dd/mm/yyyy'
        })
        .on('changeDate', function (ev) {
            $('#tIssueDate').datepicker('hide');
        });

        $('#tExpirtyDate').datepicker({
            format: 'dd/mm/yyyy'
        })
        .on('changeDate', function (ev) {
            $('#tExpirtyDate').datepicker('hide');
        });
    });
</script>
